<div class="grid grid-nogutter" style="width: 100%;background-color: #fff;">
  <div class="card p-fluid" style="width: 100%">
    <form [formGroup]="this._service.updateForm">
      <div class="grid">
        <div class="col-12 md:col-6" style="display:none;">
          <div class="field">
            <span class="p-float-label">
              <input
                [ngClass]="this._service.updateForm.get('id').hasError('required') && (this._service.updateForm.get('id').touched)? 'ng-invalid ng-dirty': ''"
                formControlName="id" pInputText type="text">
              <label>Id<span style="color:red">*</span></label>
            </span>
          </div>
        </div>


        <div class="col-12 md:col-12">
          <div class="field">
            <span class="p-float-label">
              <input
                [ngClass]="this._service.updateForm.get('fullName').hasError('required') && (this._service.updateForm.get('fullName').touched)? 'ng-invalid ng-dirty': ''"
                formControlName="fullName" pInputText type="text">
              <label>{{ 'Name' | translate }}<span style="color:red">*</span></label>
            </span>
          </div>
        </div>


        <div class="md:col-12 mt-2">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon" style="width:20%;">
              <!-- <i class="pi pi-phone"></i> -->
              <span class="p-float-label">
                <p-dropdown inputId="codeId" [autoDisplayFirst]="false" [options]="countryCodes"
              formControlName="countryCode" optionLabel="code" [filter]="true" filterBy="code"
              [showClear]="false" optionValue="phoneCode" [style]="{'width':'100%'}"
              [ngClass]="this._service.updateForm.get('countryCode').hasError('required') &&
              (this._service.updateForm.get('countryCode').touched)? 'ng-invalid ng-dirty': ''">
              </p-dropdown>
              <label for="">Select Code</label>
              </span>
            </span>
            <span class="p-float-label">
              <input (keyup)="IfPhoneExists()" type="text" id="phoneNumber" formControlName="phoneNumber" pInputText
                [ngClass]="(this._service.updateForm.get('phoneNumber').hasError('required') && (this._service.updateForm.get('phoneNumber').touched)) ||
                       (this._service.updateForm.get('phoneNumber').hasError('maxlength') && (this._service.updateForm.get('phoneNumber').touched)) ||
                       (this._service.updateForm.get('phoneNumber').hasError('minlength') && (this._service.updateForm.get('phoneNumber').touched))? 'ng-invalid ng-dirty': ''">
              <label for="phoneNumber">{{ 'Phone Number' | translate }}<span style="color:red">*</span></label>
            </span>
          </div>
          <label *ngIf="this._service.updateForm.get('phoneNumber').hasError('pattern') &&
          (this._service.updateForm.get('phoneNumber').touched)"
            style="padding-top: 5px; padding-left: 5px; padding-bottom: 0; margin:0; color: darkred; text-align: left">
            <small>Invalid phone number</small>
          </label>
          <label *ngIf="this._service.updateForm.get('phoneNumber').hasError('exists') && (this._service.updateForm.get('phoneNumber').touched)"
            style="padding-top: 5px; padding-left: 5px; padding-bottom: 0; margin:0; color: darkred; text-align: left">
            <small>{{(this._service.updateForm.get('countryCode').value + this._service.updateForm.get('phoneNumber').value).trim()}} already exists!!</small>
          </label>

          <!-- <label
            *ngIf="(!this._service.updateForm.get('phoneNumber').hasError('required') && (this._service.updateForm.get('phoneNumber').touched)) &&
                       ((this._service.updateForm.get('phoneNumber').hasError('minlength') && (this._service.updateForm.get('phoneNumber').touched)) ||
                       (this._service.updateForm.get('phoneNumber').hasError('maxlength') && (this._service.updateForm.get('phoneNumber').touched)))"
            style="padding-top: 5px; padding-left: 5px; padding-bottom: 0; margin:0; color: darkred; text-align: left">
            <small>Phone Number Must Be 10 Digit Long</small>
          </label>


          <label *ngIf="this._service.updateForm.get('countryCode').hasError('required') &&
          (this._service.updateForm.get('countryCode').touched)"
          style="padding-top: 5px; padding-left: 5px; padding-bottom: 0; margin:0; color: darkred; text-align: left">
          <small>Please select Country Code</small>
        </label> -->
        </div>

        <div class="col-12 md:col-6">
          <div class="field">
            <span class="p-float-label">
              <input (keyup)="IfEmailExists()" formControlName="email" pInputText type="text"
                [ngClass]="(this._service.updateForm.get('email').hasError('required') && (this._service.updateForm.get('email').touched)) ||
                  (this._service.updateForm.get('email').hasError('pattern') && (this._service.updateForm.get('email').touched))? 'ng-invalid ng-dirty': ''">
              <label>{{ 'Email' | translate }}<span style="color:red">*</span></label>
            </span>
            <small *ngIf="this._service.updateForm.get('email').hasError('pattern') && (this._service.updateForm.get('email').touched)"
              class="p-error">Please Insert a valid email</small>
          </div>
        </div>
        <div class="col-12 md:col-6">
          <span class="p-float-label" style="width: 100%;">
            <p-dropdown inputId="branchId" [autoDisplayFirst]="false" [options]="branches"
              formControlName="branchId" optionLabel="name" [filter]="true" filterBy="name" [showClear]="true"
              optionValue="id" [style]="{'width':'100%'}"
              [ngClass]="this._service.updateForm.get('branchId').hasError('required') &&
              (this._service.updateForm.get('branchId').touched)? 'ng-invalid ng-dirty': ''">
            </p-dropdown>
            <label for="branchId">{{ 'Branch' | translate }}<span style="color:red">*</span></label>
          </span>
        </div>
        <div class="col-12 md:col-6">
          <div class="field">
            <span class="p-float-label" style="width: 100%;">
              <p-dropdown inputId="roleId" [autoDisplayFirst]="false" [options]="roles"
                formControlName="roleId" optionLabel="name" [filter]="true" filterBy="name" [showClear]="true"
                optionValue="id" [style]="{'width':'100%'}"
                [ngClass]="this._service.updateForm.get('roleId').hasError('required') &&
                (this._service.updateForm.get('roleId').touched)? 'ng-invalid ng-dirty': ''">
              </p-dropdown>
              <label for="roleId">{{ 'Role' | translate }}<span style="color:red">*</span></label>
            </span>
            <small *ngIf="this._service.updateForm.get('roleId').hasError('required') &&
            (this._service.updateForm.get('roleId').touched)"
              class="p-error">This filed is required</small>
          </div>
        </div>


        <div class="col-12 text-end pr-5">
            <button pButton [disabled]="inProgress" icon="pi pi-save"
            class="p-button-info"
            label="{{inProgress? 'Please Wait': this.translate.instant('Update')}}"
             (click)="OnSubmit()" style="width: fit-content;"></button>

              <label pButton pRipple (click)="onCancel()"  label="{{'Cancel' | translate}}" icon="pi pi-times"
              class="ml-2 p-button-warning" style="width: fit-content;">
             </label>
        </div>


      </div>
    </form>
  </div>
</div>
