<div class="layout-topbar shadow-4">
  <div class="layout-topbar-left">
      <a class="layout-topbar-logo" routerLink="/">
        <!-- <span style="font-weight: bold;font-size:15px;">Business Solution</span> -->
          <img *ngIf="this.company?.logoUrl" src="{{baseUrl}}\{{this.company?.logoUrl}}" alt="" style="width:95%;height: inherit;align-items: center;" draggable="false">
          <img *ngIf="!this.company?.logoUrl" src="assets/images/company-logo.jpg" alt="" style="width:95%;height: inherit;" draggable="false">
           
      </a>

      <a class="layout-menu-button shadow-6 ml-4" (click)="appMain.onMenuButtonClick($event)" pRipple>
          <i class="pi pi-list"></i>
      </a>

      <a class="layout-topbar-mobile-button" (click)="appMain.onTopbarMobileButtonClick($event)" pRipple>
        <i class="pi pi-ellipsis-v fs-large"></i>
    </a>
  </div>

  <div class="layout-topbar-right" [ngClass]="{'layout-topbar-mobile-active': appMain.mobileTopbarActive}">
     
      <div class="layout-topbar-actions-left">
        <ul class="layout-topbar-items">
            
            <li class="layout-topbar-item ml-4">
                <p style="text-align: center;">
                    <span style="font-size:15px;">
                      {{ currentDate | date:"dd MMM, yyyy hh:mm:aa" }}
                    </span><br>
                    <span style="font-size:19px;">
                      {{ branchName?? '' }}
                    </span>
                  </p>
            </li>
        </ul>
       
       
      </div>
      <div class="layout-topbar-actions-right">
        <ul class="layout-topbar-items">
          
            <li (click)="onCreateCustomerSupport()" class="layout-topbar-item">
                <a class="layout-topbar-action flex flex-row justify-content-center align-items-center px-2 rounded-circle" pRipple>
                    <img src="assets/images/24-7-img.jpg" alt="avatar" style="width: 32px; height: 32px;border-radius: 25px;">
                </a>
            </li>
            <li class="layout-topbar-item notifications">
                <a class="layout-topbar-action" (click)="appMain.onTopbarNotificationClick($event, 'notifications')" pRipple>
                    <span class="p-overlay-badge mt-2">
                        <i class="pi pi-bell p-text-danger" pBadge 
                        style="font-size: 1.6rem" value="{{this._notificationService.totalCount?? '0'}}" severity="danger"></i>
                    </span>
                </a>

                <ul class="layout-topbar-action-panel shadow-6" [@topbarActionPanelAnimation]="'visible'" *ngIf="appMain.activeTopbarItem === 'notifications'">
                    <li class="mb-3">
                        <span class="px-3 fs-small">You have <b>{{this._notificationService.totalCount?? '0'}}</b> new notifications</span>
                    </li>
                    <li class="layout-topbar-action-item" *ngFor="let x of this._notificationService.notificationList">
                        <div class="flex flex-row align-items-center">
                            
                            <div class="flex flex-column" [ngClass]="{'ml-3': !app.isRTL, 'mr-3': app.isRTL}" style="flex-grow: 1;">
                                <div class="flex align-items-center justify-content-between mb-1">
                                    <span class="fs-small font-bold">{{x.message}}</span>
                                    <small style="color:rgb(63, 115, 182);">{{x.createdDate | date:'hh:mm:aa'}}</small>
                                </div>
                                
                            </div>
                        </div>
                    </li>
                    
                </ul>
            </li>
            <li class="layout-topbar-item">
                <a class="layout-topbar-action flex flex-row justify-content-center align-items-center px-2 rounded-circle" (click)="appMain.onTopbarItemClick($event, 'profile')" pRipple>
                    <img src="assets/images/user.png" alt="avatar" style="width: 32px; height: 32px;">
                </a>

                <ul class="layout-topbar-action-panel shadow-6" [@topbarActionPanelAnimation]="'visible'" *ngIf="appMain.activeTopbarItem === 'profile'">
                    
                    <li class="layout-topbar-action-item" (click)="onChangeProfile()">
                      <a class="flex flex-row align-items-center" pRipple>
                        <i class="pi pi-users" [ngClass]="{'mr-2': !app.isRTL, 'ml-2': app.isRTL}"></i>
                        <span>{{userName}}</span>
                      </a>
                    </li>
                    
                    <li class="layout-topbar-action-item" (click)="onChangeLangulage()">
                      <a class="flex flex-row align-items-center" pRipple>
                          <i class="pi pi-tags" [ngClass]="{'mr-2': !app.isRTL, 'ml-2': app.isRTL}"></i>
                          <span>{{ 'Change Language' | translate }}</span>
                      </a>
                    </li>
                   
                    <li class="layout-topbar-action-item">
                         <a routerLink="/home" class="flex flex-row align-items-center" pRipple>
                          <i class="pi pi-shopping-cart" [ngClass]="{'mr-2': !app.isRTL, 'ml-2': app.isRTL}"></i>
                          <span>{{ 'Order' | translate }}</span>
                        </a>                       
                    </li>
                   
                    <li class="layout-topbar-action-item">
                        <a class="flex flex-row align-items-center" pRipple>
                            <i class="pi pi-money-bill" [ngClass]="{'mr-2': !app.isRTL, 'ml-2': app.isRTL}"></i>
                            <span>{{'Return Order' | translate}}</span>
                        </a>
                    </li>
                    <li (click)="logout()" class="layout-topbar-action-item">
                        <a class="flex flex-row align-items-center" pRipple>
                            <i class="pi pi-sign-out text-danger" [ngClass]="{'mr-2': !app.isRTL, 'ml-2': app.isRTL}"></i>
                            <span>{{ 'Log Out' | translate }}</span>
                        </a>
                    </li>
                </ul>
            </li>
            
        </ul>
    </div>
      
  </div>
</div>

 <p-dialog [(visible)]="this.showChangeLanguage" [modal]="true" [resizable]="false"
    header="{{'Change Language' | translate}}" [style]="{'width':'50vw'}" 
    [draggable]="false" [closable]="true" >
    <div class="grid p-3" style="width:100%;">
        <div class="p-fluid" style="width:100%;">
           <div class="col-12">
                <h6>{{'Select Language' | translate}}</h6>
                <div class="field">
                    <p-dropdown [autoDisplayFirst]="false" [options]="languages" [(ngModel)]="language"
                     optionLabel="name" [filter]="true" filterBy="name" [showClear]="true" optionValue="code"
                     [style]="{'width':'100%'}">
                    </p-dropdown>
                </div>
                <div class="field text-right">
                    <button [disabled]="isProcessing" (click)="onUpdateCompanyLanguage()" style="width:fit-content;" pButton pRipple 
                    label="{{isProcessing? this.translate.instant('Please wait'):this.translate.instant('Submit')}}" icon="pi pi-check"></button>
                </div>
           </div>
        </div>
    </div>
  </p-dialog>
